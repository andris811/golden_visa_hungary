---
interface HeaderProps {
  currentLang?: 'zh' | 'en';
}
const { currentLang = 'zh' } = Astro.props as HeaderProps;

const RAW_BASE: string = import.meta.env.BASE_URL ?? '/';
const BASE: string = RAW_BASE.endsWith('/') ? RAW_BASE : RAW_BASE + '/';

const L = (p: string): string => {
  const clean = p.replace(/^\/+/, ''); // strip leading slashes
  return BASE + clean;                 // guaranteed single slash join
};

const otherLang: 'zh' | 'en' = currentLang === 'zh' ? 'en' : 'zh';
---
<header class="border-b">
  <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
    <a href={L(`${currentLang}/`)} class="font-semibold">Hungary Golden Visa</a>
    <nav class="flex gap-4 text-sm">
      <a href={L(`${currentLang}/program/`)}>Program</a>
      <a href={L(`${currentLang}/investment/`)}>Investment</a>
      <a href={L(`${currentLang}/process/`)}>Process</a>
      <a href={L(`${currentLang}/about/`)}>About</a>
      <a class="font-medium" href={L(`${currentLang}/contact/`)}>Contact</a>
      <a class="ml-6 underline" href={L(`${otherLang}/`)}>{otherLang.toUpperCase()}</a>
    </nav>
  </div>
</header>
