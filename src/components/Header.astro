---
import { BASE, L } from '../utils/base';
import { getTranslations, getOtherLang, type Lang } from '../utils/i18n';

interface HeaderProps {
  currentLang?: Lang;
  currentPage?: string;
}
const { currentLang = 'zh', currentPage = 'home' } = Astro.props as HeaderProps;

const t = getTranslations(currentLang);
const otherLang = getOtherLang(currentLang);

// Helper to determine if a link is active
const isActive = (page: string) => currentPage === page ? 'text-purple-600 font-bold' : 'text-neutral-700 hover:text-purple-600';
---
<header class="bg-white shadow-sm sticky top-0 z-50 backdrop-blur-lg bg-opacity-90">
  <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
    <a href={L(`${currentLang}/`)} class="text-xl font-bold text-purple-600 hover:text-purple-700 hover:scale-105 transition-all">
      {t.brand}
    </a>
    <nav class="hidden md:flex gap-6 text-sm items-center">
      <a href={L(`${currentLang}/program/`)} class={`${isActive('program')} transition-colors font-medium`}>{t.program}</a>
      <a href={L(`${currentLang}/investment/`)} class={`${isActive('investment')} transition-colors font-medium`}>{t.investment}</a>
      <a href={L(`${currentLang}/process/`)} class={`${isActive('process')} transition-colors font-medium`}>{t.process}</a>
      <a href={L(`${currentLang}/about/`)} class={`${isActive('about')} transition-colors font-medium`}>{t.about}</a>
      <a href={L(`${currentLang}/contact/`)} class="btn-primary px-4 py-2 rounded-lg text-white text-sm font-semibold">{t.contact}</a>
      <a href={L(`${otherLang}/`)} class="ml-2 px-3 py-1 border border-purple-600 text-purple-600 rounded-lg hover:bg-purple-600 hover:text-white transition-all" aria-label="Switch language">{t.switch}</a>
    </nav>
    <!-- Mobile menu button placeholder -->
    <button class="md:hidden p-2 text-neutral-700 hover:text-purple-600">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
      </svg>
    </button>
  </div>
</header>